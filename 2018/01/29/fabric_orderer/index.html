<!DOCTYPE html>
<html>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="orderer 启动流程关键的两个类：12345// manager 其实就是 multichannel.Registrar manager := initializeMultichannelRegistrar(conf, signer, tlsCallback) // Registrar 里面有一份 ChainSupport 的字典，存放所有 chainID 的 *ChainSupport//">
<meta property="og:type" content="article">
<meta property="og:title" content="orderer">
<meta property="og:url" content="http://yoursite.com/2018/01/29/fabric_orderer/index.html">
<meta property="og:site_name" content="Drip">
<meta property="og:description" content="orderer 启动流程关键的两个类：12345// manager 其实就是 multichannel.Registrar manager := initializeMultichannelRegistrar(conf, signer, tlsCallback) // Registrar 里面有一份 ChainSupport 的字典，存放所有 chainID 的 *ChainSupport//">
<meta property="og:updated_time" content="2018-05-23T02:54:55.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="orderer">
<meta name="twitter:description" content="orderer 启动流程关键的两个类：12345// manager 其实就是 multichannel.Registrar manager := initializeMultichannelRegistrar(conf, signer, tlsCallback) // Registrar 里面有一份 ChainSupport 的字典，存放所有 chainID 的 *ChainSupport//">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>orderer</title>
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- rss -->
    
    
</head>

<body>
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="http://github.com/probberechts">Projects</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2018/02/01/vue/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/2018/01/27/kafka/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://yoursite.com/2018/01/29/fabric_orderer/"><i class="fa fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://yoursite.com/2018/01/29/fabric_orderer/&text=orderer"><i class="fa fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://yoursite.com/2018/01/29/fabric_orderer/&title=orderer"><i class="fa fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://yoursite.com/2018/01/29/fabric_orderer/&is_video=false&description=orderer"><i class="fa fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=orderer&body=Check out this article: http://yoursite.com/2018/01/29/fabric_orderer/"><i class="fa fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://yoursite.com/2018/01/29/fabric_orderer/&title=orderer"><i class="fa fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://yoursite.com/2018/01/29/fabric_orderer/&title=orderer"><i class="fa fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://yoursite.com/2018/01/29/fabric_orderer/&title=orderer"><i class="fa fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://yoursite.com/2018/01/29/fabric_orderer/&title=orderer"><i class="fa fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://yoursite.com/2018/01/29/fabric_orderer/&name=orderer&description="><i class="fa fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#orderer-启动流程"><span class="toc-number">1.</span> <span class="toc-text">orderer 启动流程</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Manager-（多链管理器）"><span class="toc-number">2.</span> <span class="toc-text">Manager （多链管理器）</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#retry-backoff"><span class="toc-number">3.</span> <span class="toc-text">retry backoff</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#orderer-的配置文件"><span class="toc-number">4.</span> <span class="toc-text">orderer 的配置文件</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#orderer-kafka-的配置文件"><span class="toc-number">5.</span> <span class="toc-text">orderer/kafka 的配置文件</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#orderer-是否是所谓的-consenter-？"><span class="toc-number">6.</span> <span class="toc-text">orderer 是否是所谓的 consenter ？</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#orderer-收到-peer-的-Broadcast-请求后（如果是-CONFIG-UPDATE，则额外转化一下，其实所谓的-CONFIG-UPDATE-就是对象为channel的交易tx，所谓的额外转化其实就是-orderer-上的模拟执行，执行结果就是-Proposal，然后发送给kafka进行共识），然后将其发送给-kafka，所有的请求处理，是在从-kafka-收到-message-后再进行的。"><span class="toc-number">7.</span> <span class="toc-text">orderer 收到 peer 的 Broadcast 请求后（如果是 CONFIG_UPDATE，则额外转化一下，其实所谓的 CONFIG_UPDATE 就是对象为channel的交易tx，所谓的额外转化其实就是 orderer 上的模拟执行，执行结果就是 Proposal，然后发送给kafka进行共识），然后将其发送给 kafka，所有的请求处理，是在从 kafka 收到 message 后再进行的。</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index width mx-auto px2 my4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        orderer
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Drip</span>
      </span>
      
    <div class="postdate">
        <time datetime="2018-01-29T02:30:30.000Z" itemprop="datePublished">2018-01-29</time>
    </div>


      

    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h1 id="orderer-启动流程"><a href="#orderer-启动流程" class="headerlink" title="orderer 启动流程"></a>orderer 启动流程</h1><p>关键的两个类：<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// manager 其实就是 multichannel.Registrar </span></div><div class="line">manager := initializeMultichannelRegistrar(conf, signer, tlsCallback) </div><div class="line"><span class="comment">// Registrar 里面有一份 ChainSupport 的字典，存放所有 chainID 的 *ChainSupport</span></div><div class="line"><span class="comment">// Registrar 里面还有 ledgerFactory，操作账本</span></div><div class="line"><span class="comment">// Registrar 里面还有 consenters 字典，存放不同的共识算法的 Consenter</span></div></pre></td></tr></table></figure></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// server 是 AtomicBroadcastServer，即 grpc 中对应 service 的实现类，实现了 Broadcast 和 Deliver 的具体逻辑</span></div><div class="line">server := NewServer(manager, signer, &amp;conf.Debug, conf.General.Authentication.TimeWindow, mutualTLS)</div></pre></td></tr></table></figure>
<p>当 client 调用 Broadcast 方法时，通过 grpc 发送至上面的 server 实现的 Broadcast 方法中 (peer 发送交易)<br><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// broadcastMsgTracer 其实就是包装了下 AtomicBroadcast_BroadcastServer，增加了 log 写入</span></div><div class="line"><span class="keyword">return</span> s.bh.Handle(&amp;broadcastMsgTracer&#123;</div><div class="line">		AtomicBroadcast_BroadcastServer: srv,</div><div class="line">		msgTracer: msgTracer&#123;</div><div class="line">			debug:    s.debug,</div><div class="line">			function: <span class="string">"Broadcast"</span>,</div><div class="line">		&#125;,</div><div class="line">	&#125;)</div><div class="line"></div><div class="line"><span class="comment">// 而在 server.bh.Handle 中，关键的是下面</span></div><div class="line"><span class="comment">// bh.sm 就是 multichannel.Registrar，即前面的 manager</span></div><div class="line"><span class="comment">// 而这个 msg 就是 *Envelope，它是请求的交易的封装结构体</span></div><div class="line">chdr, isConfig, processor, err := bh.sm.BroadcastChannelSupport(msg)</div><div class="line"></div><div class="line"><span class="comment">// 下面就是上面调用方法的实现</span></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="params">(r *Registrar)</span> <span class="title">BroadcastChannelSupport</span><span class="params">(msg *cb.Envelope)</span> <span class="params">(*cb.ChannelHeader, <span class="keyword">bool</span>, *ChainSupport, error)</span></span> &#123;</div><div class="line">	chdr, err := utils.ChannelHeader(msg)</div><div class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</div><div class="line">		<span class="keyword">return</span> <span class="literal">nil</span>, <span class="literal">false</span>, <span class="literal">nil</span>, fmt.Errorf(<span class="string">"could not determine channel ID: %s"</span>, err)</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	cs, ok := r.chains[chdr.ChannelId]</div><div class="line">	<span class="keyword">if</span> !ok &#123;</div><div class="line">		cs = r.systemChannel</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	isConfig := <span class="literal">false</span></div><div class="line">	<span class="keyword">switch</span> cs.ClassifyMsg(chdr) &#123;</div><div class="line">	<span class="keyword">case</span> msgprocessor.ConfigUpdateMsg:</div><div class="line">		isConfig = <span class="literal">true</span></div><div class="line">	<span class="keyword">default</span>:</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="keyword">return</span> chdr, isConfig, cs, <span class="literal">nil</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 返回的 processor 就是 ChainSupport 类型的对象</span></div><div class="line"><span class="comment">// 调用 processor 来处理非 config 的 msg</span></div><div class="line">configSeq, err := processor.ProcessNormalMsg(msg)</div><div class="line"></div><div class="line"><span class="comment">// 或调用 processor 来处理 config 的 msg</span></div><div class="line">config, configSeq, err := processor.ProcessConfigUpdateMsg(msg)</div><div class="line"></div><div class="line"><span class="comment">// 看一下 processor 的类型 ChainSupport</span></div><div class="line"><span class="comment">// 利用匿名嵌入的方式实现继承，其中 ProcessNormalMsg 方法即来自于 msgprocessor.Processor </span></div><div class="line"><span class="comment">// ChainSupport holds the resources for a particular channel.</span></div><div class="line"><span class="keyword">type</span> ChainSupport <span class="keyword">struct</span> &#123;</div><div class="line">	*ledgerResources</div><div class="line">	msgprocessor.Processor</div><div class="line">	*BlockWriter</div><div class="line">	consensus.Chain</div><div class="line">	cutter blockcutter.Receiver</div><div class="line">	crypto.LocalSigner</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 其中 msgprocessor.Processor 是这样初始化的</span></div><div class="line">cs.Processor = msgprocessor.NewStandardChannel(cs, msgprocessor.CreateStandardChannelFilters(cs))</div><div class="line"></div><div class="line"><span class="comment">// 返回的 Processor 对象其实是一个 StandardChannel</span></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">NewStandardChannel</span><span class="params">(support StandardChannelSupport, filters *RuleSet)</span> *<span class="title">StandardChannel</span></span> &#123;</div><div class="line">	<span class="keyword">return</span> &amp;StandardChannel&#123;</div><div class="line">		filters: filters,</div><div class="line">		support: support,</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// 其中 filters 会检查证书是否过期，消息大小是否过大，签名是否符合策略</span></div><div class="line"><span class="keyword">return</span> NewRuleSet([]Rule&#123;</div><div class="line">		EmptyRejectRule,</div><div class="line">		NewExpirationRejectRule(filterSupport),</div><div class="line">		NewSizeFilter(ordererConfig),</div><div class="line">		NewSigFilter(policies.ChannelWriters, filterSupport),</div><div class="line">	&#125;)</div><div class="line"></div><div class="line"><span class="comment">// 其中 cs.Chain 是提供交易信息/配置信息，成为 block-chain 的功能</span></div><div class="line">cs.Chain, err = consenter.HandleChain(cs, metadata)</div><div class="line"></div><div class="line"><span class="comment">// Chain 的接口如下</span></div><div class="line"><span class="comment">// 一般创建完对应 channel 的 Chain 后，调用其 Start() 开始工作</span></div><div class="line"><span class="keyword">type</span> Chain <span class="keyword">interface</span> &#123;</div><div class="line">	<span class="comment">// 交易信息的验证，加入序列，切块等处理</span></div><div class="line">	Order(env *cb.Envelope, configSeq <span class="keyword">uint64</span>) error</div><div class="line">	<span class="comment">// 配置信息</span></div><div class="line">	Configure(config *cb.Envelope, configSeq <span class="keyword">uint64</span>) error</div><div class="line">	<span class="comment">// 阻塞直到可以处理该信息</span></div><div class="line">	WaitReady() error</div><div class="line"></div><div class="line">	Errored() &lt;-<span class="keyword">chan</span> <span class="keyword">struct</span>&#123;&#125;</div><div class="line">	<span class="comment">// 开启处理交易信息</span></div><div class="line">	Start()</div><div class="line">	<span class="comment">// 停止</span></div><div class="line">	Halt()</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h1 id="Manager-（多链管理器）"><a href="#Manager-（多链管理器）" class="headerlink" title="Manager （多链管理器）"></a>Manager （多链管理器）</h1><figure class="highlight go"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Manager coordinates the creation and access of chains</span></div><div class="line"><span class="keyword">type</span> Manager <span class="keyword">interface</span> &#123;</div><div class="line">	<span class="comment">// GetChain retrieves the chain support for a chain (and whether it exists)</span></div><div class="line">	GetChain(chainID <span class="keyword">string</span>) (ChainSupport, <span class="keyword">bool</span>)</div><div class="line"></div><div class="line">	<span class="comment">// SystemChannelID returns the channel ID for the system channel</span></div><div class="line">	SystemChannelID() <span class="keyword">string</span></div><div class="line"></div><div class="line">	<span class="comment">// NewChannelConfig returns a bare bones configuration ready for channel</span></div><div class="line">	<span class="comment">// creation request to be applied on top of it</span></div><div class="line">	NewChannelConfig(envConfigUpdate *cb.Envelope) (configtxapi.Manager, error)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h1 id="retry-backoff"><a href="#retry-backoff" class="headerlink" title="retry backoff"></a>retry backoff</h1><p>重试的间隔<br>exponential backoff algorithms: 指数间隔增长算法</p>
<h1 id="orderer-的配置文件"><a href="#orderer-的配置文件" class="headerlink" title="orderer 的配置文件"></a>orderer 的配置文件</h1><p>github.com/hyperledger/fabric/orderer/localconfig/config.go</p>
<h1 id="orderer-kafka-的配置文件"><a href="#orderer-kafka-的配置文件" class="headerlink" title="orderer/kafka 的配置文件"></a>orderer/kafka 的配置文件</h1><p>github.com/hyperledger/fabric/orderer/kafka/config.go</p>
<h1 id="orderer-是否是所谓的-consenter-？"><a href="#orderer-是否是所谓的-consenter-？" class="headerlink" title="orderer 是否是所谓的 consenter ？"></a>orderer 是否是所谓的 consenter ？</h1><p>Kafka-based consenter</p>
<h1 id="orderer-收到-peer-的-Broadcast-请求后（如果是-CONFIG-UPDATE，则额外转化一下，其实所谓的-CONFIG-UPDATE-就是对象为channel的交易tx，所谓的额外转化其实就是-orderer-上的模拟执行，执行结果就是-Proposal，然后发送给kafka进行共识），然后将其发送给-kafka，所有的请求处理，是在从-kafka-收到-message-后再进行的。"><a href="#orderer-收到-peer-的-Broadcast-请求后（如果是-CONFIG-UPDATE，则额外转化一下，其实所谓的-CONFIG-UPDATE-就是对象为channel的交易tx，所谓的额外转化其实就是-orderer-上的模拟执行，执行结果就是-Proposal，然后发送给kafka进行共识），然后将其发送给-kafka，所有的请求处理，是在从-kafka-收到-message-后再进行的。" class="headerlink" title="orderer 收到 peer 的 Broadcast 请求后（如果是 CONFIG_UPDATE，则额外转化一下，其实所谓的 CONFIG_UPDATE 就是对象为channel的交易tx，所谓的额外转化其实就是 orderer 上的模拟执行，执行结果就是 Proposal，然后发送给kafka进行共识），然后将其发送给 kafka，所有的请求处理，是在从 kafka 收到 message 后再进行的。"></a>orderer 收到 peer 的 Broadcast 请求后（如果是 CONFIG_UPDATE，则额外转化一下，其实所谓的 CONFIG_UPDATE 就是对象为channel的交易tx，所谓的额外转化其实就是 orderer 上的模拟执行，执行结果就是 Proposal，然后发送给kafka进行共识），然后将其发送给 kafka，所有的请求处理，是在从 kafka 收到 message 后再进行的。</h1>
  </div>
</article>



    </div>
    
      <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="http://github.com/probberechts">Projects</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#orderer-启动流程"><span class="toc-number">1.</span> <span class="toc-text">orderer 启动流程</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Manager-（多链管理器）"><span class="toc-number">2.</span> <span class="toc-text">Manager （多链管理器）</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#retry-backoff"><span class="toc-number">3.</span> <span class="toc-text">retry backoff</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#orderer-的配置文件"><span class="toc-number">4.</span> <span class="toc-text">orderer 的配置文件</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#orderer-kafka-的配置文件"><span class="toc-number">5.</span> <span class="toc-text">orderer/kafka 的配置文件</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#orderer-是否是所谓的-consenter-？"><span class="toc-number">6.</span> <span class="toc-text">orderer 是否是所谓的 consenter ？</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#orderer-收到-peer-的-Broadcast-请求后（如果是-CONFIG-UPDATE，则额外转化一下，其实所谓的-CONFIG-UPDATE-就是对象为channel的交易tx，所谓的额外转化其实就是-orderer-上的模拟执行，执行结果就是-Proposal，然后发送给kafka进行共识），然后将其发送给-kafka，所有的请求处理，是在从-kafka-收到-message-后再进行的。"><span class="toc-number">7.</span> <span class="toc-text">orderer 收到 peer 的 Broadcast 请求后（如果是 CONFIG_UPDATE，则额外转化一下，其实所谓的 CONFIG_UPDATE 就是对象为channel的交易tx，所谓的额外转化其实就是 orderer 上的模拟执行，执行结果就是 Proposal，然后发送给kafka进行共识），然后将其发送给 kafka，所有的请求处理，是在从 kafka 收到 message 后再进行的。</span></a></li></ol>
    </div>

    <div id="actions-footer">
      <ul>
        <li id="toc"><a class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fa fa-list fa-lg" aria-hidden="true"></i> TOC</a></li>
        <li id="share"><a class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fa fa-share-alt fa-lg" aria-hidden="true"></i> Share</a></li>
        <li id="top" style="display:none"><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a></li>
        <li id="menu"><a class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fa fa-bars fa-lg" aria-hidden="true"></i> Menu</a></li>
      </ul>
    </div>

  </div>
</div>

    
    <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2018 Landleany
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="http://github.com/probberechts">Projects</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

</body>
</html>
<!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
<link rel="stylesheet" href="/lib/meslo-LG/styles.css">
<link rel="stylesheet" href="/lib/justified-gallery/justifiedGallery.min.css">

<!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/jquery.justifiedGallery.min.js"></script>
<script src="/js/main.js"></script>
<!-- search -->

<!-- Google Analytics -->

    <script type="text/javascript">
        (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-86660611-1', 'auto');
        ga('send', 'pageview');
    </script>

<!-- Disqus Comments -->


